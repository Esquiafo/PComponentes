{"ast":null,"code":"import{initializeApp}from'firebase/app';import{collection,addDoc,getFirestore,updateDoc,doc}from\"firebase/firestore\";var PushApi=function PushApi(props){var app=initializeApp({apiKey:\"AIzaSyCX4jT-67GWc46D1Q6RZqXmW6Cyzd2vgl0\",authDomain:\"artstation-c28e8.firebaseapp.com\",projectId:\"artstation-c28e8\",storageBucket:\"artstation-c28e8.appspot.com\",messagingSenderId:\"552661991680\",appId:\"1:552661991680:web:13d9ecc1f0b81b2a86b3e5\"});var finalPrice=0;props.items.map(function(x){return finalPrice=finalPrice+x.price*x.cantidad;});var db=getFirestore();// Add a new document with a generated id.\naddDoc(collection(db,\"order\"),{buyer:props.name,items:props.items,date:new Date().toLocaleString()+\"\",total:finalPrice,phone:props.phone}).then(function(docRef){props.items.map(function(x){var stocked=parseInt(x.cantidad);var productsUpdated=doc(db,\"products\",x.id);updateDoc(productsUpdated,{stock:x.stock-stocked});});alert(\"Tu ID de compra es \"+docRef.id);}).catch(function(error){console.error(\"Error adding document: \",error);});};export default PushApi;","map":{"version":3,"sources":["C:/Users/leoca/Desktop/React/artstation-capone/Artstation-Capone/src/Components/PushApi.js"],"names":["initializeApp","collection","addDoc","getFirestore","updateDoc","doc","PushApi","props","app","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","finalPrice","items","map","x","price","cantidad","db","buyer","name","date","Date","toLocaleString","total","phone","then","docRef","stocked","parseInt","productsUpdated","id","stock","alert","catch","error","console"],"mappings":"AAAA,OAAUA,aAAV,KAA+B,cAA/B,CACA,OAASC,UAAT,CAAqBC,MAArB,CAA6BC,YAA7B,CAA2CC,SAA3C,CAAqDC,GAArD,KAAgE,oBAAhE,CAKA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,KAAD,CAAU,CACtB,GAAMC,CAAAA,GAAG,CAAGR,aAAa,CAAC,CACtBS,MAAM,CAAE,yCADc,CAEtBC,UAAU,CAAE,kCAFU,CAGtBC,SAAS,CAAE,kBAHW,CAItBC,aAAa,CAAE,8BAJO,CAKtBC,iBAAiB,CAAE,cALG,CAMtBC,KAAK,CAAE,2CANe,CAAD,CAAzB,CAQJ,GAAIC,CAAAA,UAAU,CAAC,CAAf,CACAR,KAAK,CAACS,KAAN,CAAYC,GAAZ,CAAgB,SAAAC,CAAC,QAAEH,CAAAA,UAAU,CAACA,UAAU,CAAEG,CAAC,CAACC,KAAF,CAAQD,CAAC,CAACE,QAAnC,EAAjB,EACC,GAAMC,CAAAA,EAAE,CAAGlB,YAAY,EAAvB,CAGD;AACAD,MAAM,CAACD,UAAU,CAACoB,EAAD,CAAK,OAAL,CAAX,CAA0B,CAC5BC,KAAK,CAAEf,KAAK,CAACgB,IADe,CAE5BP,KAAK,CAAET,KAAK,CAACS,KAFe,CAG5BQ,IAAI,CAAE,GAAIC,CAAAA,IAAJ,GAAWC,cAAX,GAA8B,EAHR,CAI5BC,KAAK,CAAEZ,UAJqB,CAK5Ba,KAAK,CAAErB,KAAK,CAACqB,KALe,CAA1B,CAAN,CAQCC,IARD,CAQM,SAASC,MAAT,CAAiB,CAEnBvB,KAAK,CAACS,KAAN,CAAYC,GAAZ,CAAgB,SAAAC,CAAC,CAAE,CAEnB,GAAIa,CAAAA,OAAO,CAAGC,QAAQ,CAACd,CAAC,CAACE,QAAH,CAAtB,CACA,GAAIa,CAAAA,eAAe,CAAG5B,GAAG,CAACgB,EAAD,CAAK,UAAL,CAAiBH,CAAC,CAACgB,EAAnB,CAAzB,CACA9B,SAAS,CAAC6B,eAAD,CAAkB,CACvBE,KAAK,CAAGjB,CAAC,CAACiB,KAAF,CAAUJ,OADK,CAAlB,CAAT,CAGC,CAPD,EASAK,KAAK,CAAC,sBAAwBN,MAAM,CAACI,EAAhC,CAAL,CACH,CApBD,EAqBCG,KArBD,CAqBO,SAASC,KAAT,CAAgB,CACnBC,OAAO,CAACD,KAAR,CAAc,yBAAd,CAAyCA,KAAzC,EACH,CAvBD,EAyBC,CAxCD,CAyCA,cAAehC,CAAAA,OAAf","sourcesContent":["import {  initializeApp } from 'firebase/app';\r\nimport { collection, addDoc, getFirestore, updateDoc,doc } from \"firebase/firestore\"; \r\n\r\n\r\n\r\n\r\nconst PushApi = (props) =>{\r\n    const app = initializeApp({\r\n        apiKey: \"AIzaSyCX4jT-67GWc46D1Q6RZqXmW6Cyzd2vgl0\",\r\n        authDomain: \"artstation-c28e8.firebaseapp.com\",\r\n        projectId: \"artstation-c28e8\",\r\n        storageBucket: \"artstation-c28e8.appspot.com\",\r\n        messagingSenderId: \"552661991680\",\r\n        appId: \"1:552661991680:web:13d9ecc1f0b81b2a86b3e5\"\r\n    });\r\nlet finalPrice=0;\r\nprops.items.map(x=>finalPrice=finalPrice+(x.price*x.cantidad))\r\n const db = getFirestore();\r\n \r\n\r\n// Add a new document with a generated id.\r\naddDoc(collection(db, \"order\"), {\r\n    buyer: props.name,\r\n    items: props.items,\r\n    date: new Date().toLocaleString() + \"\",\r\n    total: finalPrice, \r\n    phone: props.phone, \r\n  })\r\n \r\n.then(function(docRef) {\r\n    \r\n    props.items.map(x=>{   \r\n\r\n    let stocked = parseInt(x.cantidad);\r\n    let productsUpdated = doc(db, \"products\", x.id)\r\n    updateDoc(productsUpdated, {\r\n        stock: (x.stock - stocked)\r\n      });\r\n    })\r\n    \r\n    alert(\"Tu ID de compra es \" + docRef.id)\r\n})\r\n.catch(function(error) {\r\n    console.error(\"Error adding document: \", error);\r\n});\r\n\r\n}\r\nexport default PushApi;"]},"metadata":{},"sourceType":"module"}